<app-header></app-header>
<div class="mt-32">
    <h1 class="text-4xl sm:text-6xl font-bold mb-4 transition-all text-center">
        {{ 'Export' | translate }}
    </h1>
    <p
        class="w-full text-center p-2 font-sans text-lg dark:text-neutral-300 text-neutral-700 select-none">
        {{ 'Its your data - you can use it however you want!' | translate }}
    </p>
</div>

<div class="w-full flex justify-center mt-8">
    <form [formGroup]="exportForm" class="w-full max-w-lg px-4">
        <div class="mb-4">
            <label
                class="block text-neutral-700 dark:text-neutral-300 text-sm font-bold mb-2"
                for="name">
                {{ 'Export Name' | translate }}
            </label>
            <input
                class="shadow appearance-none border rounded w-full py-2 px-3 text-neutral-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-neutral-800 dark:text-white dark:border-neutral-600"
                id="name"
                type="text"
                formControlName="name" />
        </div>
        <div class="mb-6">
            <label
                class="block text-neutral-700 dark:text-neutral-300 text-sm font-bold mb-2"
                for="description">
                {{ 'Description' | translate }}
            </label>
            <textarea
                class="shadow appearance-none border rounded w-full py-2 px-3 text-neutral-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-neutral-800 dark:text-white dark:border-neutral-600"
                id="description"
                formControlName="description"
                rows="3"></textarea>
        </div>
    </form>
</div>

<div class="w-full mt-4 flex justify-center items-center">
    <div
        class="w-1/3 h-32 mr-7 border hover:border-x-white border-neutral-500 rounded-lg font-sans flex justify-center items-center cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all"
        (click)="exportAs('JSON')">
        <p>{{ 'Download as JSON' | translate }}</p>
    </div>
    <div
        class="w-1/3 h-32 ml-7 border hover:border-x-white border-neutral-500 rounded-lg font-sans flex justify-center items-center cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all"
        (click)="exportAs('CSV')">
        <p>{{ 'Download as CSV' | translate }}</p>
    </div>
</div>
<div class="w-full mt-9 flex justify-center items-center">
    <div
        class="w-1/2 mb-10 h-32 mr-10 border hover:border-x-white border-neutral-500 rounded-lg font-sans flex justify-center items-center cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all"
        (click)="exportAs('PDF')">
        <p>{{ 'Download as PDF' | translate }}</p>
    </div>
</div>

<!-- Export History -->
<div
    class="w-full mt-8 flex justify-center"
    *ngIf="exportHistory && exportHistory.length > 0">
    <div class="w-full max-w-3xl px-4">
        <h2 class="text-2xl font-bold mb-4 text-center">
            {{ 'Export History' | translate }}
        </h2>
        <div
            class="bg-white dark:bg-neutral-800 shadow overflow-hidden rounded-lg">
            <table
                class="min-w-full divide-y divide-neutral-200 dark:divide-neutral-700">
                <thead class="bg-neutral-50 dark:bg-neutral-700">
                    <tr>
                        <th
                            class="px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider">
                            {{ 'Name' | translate }}
                        </th>
                        <th
                            class="px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider">
                            {{ 'Format' | translate }}
                        </th>
                        <th
                            class="px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider">
                            {{ 'Date' | translate }}
                        </th>
                    </tr>
                </thead>
                <tbody
                    class="bg-white divide-y divide-neutral-200 dark:bg-neutral-800 dark:divide-neutral-700">
                    <tr *ngFor="let export of exportHistory">
                        <td
                            class="px-6 py-4 whitespace-nowrap text-sm text-neutral-900 dark:text-white">
                            {{ export.name }}
                        </td>
                        <td
                            class="px-6 py-4 whitespace-nowrap text-sm text-neutral-900 dark:text-white">
                            {{ export.format }}
                        </td>
                        <td
                            class="px-6 py-4 whitespace-nowrap text-sm text-neutral-900 dark:text-white">
                            {{ export.date | date: 'medium' }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
